@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

/* -----------------------------------------------------------------------------
   Global reset
   Remove default browser margin/padding so layout and sizing are consistent.
   ----------------------------------------------------------------------------- */
html, body {
  margin: 0;
  padding: 0;
}

/* -----------------------------------------------------------------------------
   Main animation stage
   Full-viewport container for the animated sky (day → dusk → night), the
   environmental elements (sun, moon, clouds, particles), and the foreground.
   ----------------------------------------------------------------------------- */
#animation-container {
  background-color: #68228b;
  overflow: hidden;

  /* Compose one or more time-based sky animations:
     arguments: (name, duration, timing, delay, iteration) */
  @include dynamic-animations((skyTransition, 10s, linear, 3.5s, infinite));
  @include mixin-skyTransition(skyTransition);

  // Keep the stage full-height and positioned relative for absolutely positioned children
  @include position($position: relative);
  @include size($width: null, $height: 100vh);
}

/* -----------------------------------------------------------------------------
   Skyline foreground (single image)
   The single New York skyline image is anchored to the bottom of the stage
   and stretched to the viewport width while preserving aspect ratio. Animated
   sky and particles render behind this layer.
   ----------------------------------------------------------------------------- */
img.cityscape {
  @include position($bottom: 0, $position: absolute);
  @include size($width: 100%, $height: auto);
  @include z-index(3);
}

/* -----------------------------------------------------------------------------
   Fullscreen section helper
   Utility for sections or overlays that must cover the entire viewport inside
   the animation stage (e.g. full-screen UI panels or overlays).
   ----------------------------------------------------------------------------- */
section {
  @include position($left: 0, $top: 0);
  @include size($width: 100%, $height: 100vh);
}

/* -----------------------------------------------------------------------------
   Paused state (controlled by JS)
   When paused, CSS animations stop and a subtle blur + fade indicates the
   paused state visually.
   ----------------------------------------------------------------------------- */
.paused {
  animation-play-state: $animation-paused !important;
  filter: blur(2px);
  opacity: 0.5;

  /* Smoothly transition the opacity and blur when toggling pause */
  @include transition-full((opacity, filter), 0.3s);
}

/* Ensure every child animation is paused (not only the container) */
#animation-container.paused * {
  animation-play-state: $animation-paused !important;
  transition: none !important;
}

/* -----------------------------------------------------------------------------
   Central play button (initial interaction)
   A centered, glass-like play prompt displayed before the first interaction.
   Clicking it should start audio and resume animations; JS toggles classes to
   drive fade/scale transitions. Kept interactive (outside paused behavior).
   ----------------------------------------------------------------------------- */
#play-button {
  backdrop-filter: blur(6px);
  background: rgba(0,0,0,0.55);
  border: none;
  border-radius: $border-radius;
  cursor: pointer;
  display: grid;
  place-items: center;

  // Keep translate in CSS so centering persists when JS updates only scale
  transform: translate(-50%, -50%) scale(1);
  z-index: 9999;

  // Use the transition mixin for consistent transition properties
  @include transition-full(opacity, 0.3s);
  @include position($position: fixed, $left: 50%, $top: 50%);
  @include size(84px);
}
