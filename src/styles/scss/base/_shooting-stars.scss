@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

/* Shooting Stars Layer
   Creates animated stars with diagonal movement and comet tail. */

span.shooting-star {
  background-color: #fff; // Star core color
  border-radius: $border-radius; // Rounded point
  @include dynamic-animations((shootingStars, 13.5s, ease-in, 0s, infinite)); // Main trajectory animation
  @include mixin-shootingStars; // Keyframe set for star flight
  @include position($left: 50%, $top: 50%, $position: absolute); // Start position reference
  @include size(2px); // Star size
  @include box-shadow(
    0 0 0 2px rgba(255, 255, 255, 0.1),
    0 0 0 4px rgba(255, 255, 255, 0.1),
    0 0 1px 1px rgba(255, 255, 255, 1)
  ); // Glow

  &.paused {
    animation-play-state: paused !important; // Pause when parent is paused
  }
}

/* Comet Tail */

span.shooting-star::before {
  background: linear-gradient(90deg, #fff, transparent); // Tail fade
  content: '';
  transform: translateY(-50%); // Center tail vertically
  @include dynamic-animations((cometTail, 10s, linear, 3.5s, infinite)); // Tail fade timing
  @include mixin-cometTail(cometTail); // Tail keyframes
  @include position($top: 50%, $position: absolute);
  @include size(200px, 1px); // Tail length + thickness

  &.paused {
    animation-play-state: paused !important;
  }
}

/* Individual Star Variants */

span.shooting-star:nth-child(1) {
  @include animation-properties(0.8s, $delay: 3s); // Unique timing
  @include position($left: 80vw, $top: -25px); // Origin point
  @include size(4px); // Larger / brighter star
  @include box-shadow(
    0 0 0 2px rgba(255, 255, 255, 0.1),
    0 0 0 20px rgba(255, 255, 255, 0.1),
    0 0 5px 5px rgba(255, 255, 255, 1)
  );
}

span.shooting-star:nth-child(2) {
  @include dynamic-animations(
    (shootingStars, 2s, linear, 1s, 1),
    (starVisibilityControl2, 2s, linear, 1.25s, 1)
  ); // Slow entry + controlled fade
  @include mixin-starVisibilityControl2(starVisibilityControl2); // Visibility transition
  @include position($left: 50vw, $top: -10px);
}

span.shooting-star:nth-child(3) {
  @include dynamic-animations(
    (shootingStars, 3s, linear, -1s, 1),
    (starVisibilityControl2, 3s, linear, -0.25s, 1)
  ); // Negative delay = starts mid-animation
  @include mixin-starVisibilityControl2(starVisibilityControl2);
  @include position($left: 110vw, $top: -10px); // Off-screen start
}

span.shooting-star:nth-child(4) {
  @include dynamic-animations(
    (shootingStars, 5s, linear, 5s, infinite),
    (starVisibilityControl, 10s, linear, 3.5s, infinite)
  ); // Continuous loop star
  @include mixin-starVisibilityControl(starVisibilityControl);
  @include position(75vw, null, -10px, null, null);
  @include z-index(2); // Foreground layer
}
