@use './variables' as *;
@use './maps' as *;
@use 'sass:list'; 
@use 'sass:map'; 
@use 'sass:meta'; 

/* =============================
   Sky transition animation
   Changes sky color over a full day cycle
   Params: $animation-name, $night-color, $morning-color, $sunset-color
============================= */
@mixin mixin-skyTransition($animation-name, $night-color: #68228b, $morning-color: #ccccff, $sunset-color: #fc753d) {
  @keyframes #{$animation-name} {
    0%, 100% {
      background-color: $night-color; // Specifies the start and end colors for the night phase
    }
    25%, 50% {
      background-color: $morning-color; // Specifies the colors for the morning and afternoon phase
    }
    75% {
      background-color: $sunset-color; // Specifies the color for the sunset phase
    }
  }
}

/* =============================
   Position helper
   Dynamically sets position and offsets
   Params: $left, $right, $top, $bottom, $position
============================= */
@mixin position($left: null, $right: null, $top: null, $bottom: null, $position: null) {
  @if $position != null {
    & {
      position: $position; // Set the `position` property if $position is provided
    }
  }
  @if $left != null {
    & {
      left: $left; // Set the `left` property if $left is provided
    }
  }
  @if $right != null {
    & {
      right: $right; // Set the `right` property if $right is provided
    }
  }
  @if $top != null {
    & {
      top: $top; // Set the `top` property if $top is provided
    }
  }
  @if $bottom != null {
    & {
      bottom: $bottom; // Set the `bottom` property if $bottom is provided
    }
  }
}

/* =============================
   Sun path animation
   Moves sun across sky with gradient & shadow
   Params: $name, $sun-settings map
============================= */
@mixin mixin-sunPath($name, $sun-settings) {
  @keyframes #{$name} {
    0% { // Defines the sun's position, gradient, and shadow at sunrise
      bottom: -19.2vh;
      left: 10vw; // Sun position at sunrise
      background: map.get($sun-settings, gradient-sunrise); // Sets the sun's gradient at sunrise
      box-shadow: map.get($sun-settings, shadow-sunrise); // Sets the sunlight effect for sunrise
    }
    12.5% { // Defines the sun's state in the morning
      bottom: 30.6vh;
      left: 10vw; // Sun position in the morning
      background: map.get($sun-settings, gradient-sunrise); // Sets the sun's gradient in the morning
      box-shadow: map.get($sun-settings, shadow-morning); // Sets the sunlight effect for morning
    }
    25% { // Defines the sun's state late in the morning
      bottom: 70.8vh;
      left: 10vw; // Sun position late in the morning
      background: map.get($sun-settings, gradient-morning); // Sets the sun's gradient late in the morning
      box-shadow: map.get($sun-settings, shadow-afternoon); // Sets the sunlight effect for late morning
    }
    37.5% { // Defines the sun's state at noon
      bottom: 70.8vh;
      left: 44vw; // Sun position at noon
      background: map.get($sun-settings, gradient-morning); // Sets the sun's gradient at noon
      box-shadow: map.get($sun-settings, shadow-noon); // Sets the sunlight effect for noon
    }
    50% { // Defines the sun's state in the afternoon
      bottom: 70.8vh;
      left: 78vw; // Sun position in the afternoon
      background: map.get($sun-settings, gradient-morning); // Sets the sun's gradient in the afternoon
      box-shadow: map.get($sun-settings, shadow-afternoon); // Sets the sunlight effect for afternoon
    }
    62.5% { // Defines the sun's state at sunset
      bottom: 30.6vh;
      left: 78vw; // Sun position at sunset
      background: map.get($sun-settings, gradient-sunset); // Sets the sun's gradient at sunset
      box-shadow: map.get($sun-settings, shadow-sunset); // Sets the sunlight effect for sunset
    }
    75% { // Defines the sun's state at dusk
      bottom: -19.2vh;
      left: 78vw; // Sun position at dusk
      background: map.get($sun-settings, gradient-sunset); // Sets the sun's gradient at dusk
      box-shadow: map.get($sun-settings, shadow-dusk); // Sets the sunlight effect for dusk
    }
    87.5% { // Defines the sun's state at night
      bottom: -19.2vh;
      left: 44vw; // Sun position at night
      background: map.get($sun-settings, gradient-night); // Sets the sun's gradient at night
      box-shadow: map.get($sun-settings, shadow-night); // Sets the sunlight effect for night
    }
    100% { // Defines the sun's state before dawn
      bottom: -19.2vh;
      left: 10vw; // Sun position before dawn
      background: map.get($sun-settings, gradient-night); // Sets the sun's gradient before dawn
      box-shadow: map.get($sun-settings, shadow-night); // Sets the sunlight effect before dawn
    }
  }
}

/* =============================
   Sun pulsate effect
   Creates subtle scale animation
   Params: $name, $scale-large, $scale-small
============================= */
@mixin mixin-sunPulsate($name, $scale-large: 2, $scale-small: 0.8) {
  @keyframes #{$name} { // Generates keyframes for the specified animation name
    0%, 75% {
      transform: scale($scale-large); // Sets the sun's scale to its largest size at the start and end of the animation
    }
    25%, 50% {
      transform: scale($scale-small); // Sets the sun's scale to its smallest size at intermediate points in the animation
    }
  }
}

/* =============================
   Moon rotation
   Moves moon texture horizontally
   Params: $name, $moon-start-position, $moon-end-position
============================= */
@mixin mixin-moonRotate($name, $moon-start-position: -10%, $moon-end-position: -50%) {
  @keyframes #{$name} {  // Generates keyframes for the specified animation name
    from {
      transform: translateX($moon-start-position); // Sets the moon's texture at the starting position
    }
    to {
      transform: translateX($moon-end-position); // Moves the moon's texture to the ending position
    }
  }
}

/* =============================
   Moon fade
   Controls moon visibility day/night
   Params: $name, $opacity-full, $opacity-hidden, $opacity-partial
============================= */
@mixin mixin-moonFade($name, $opacity-full: 1, $opacity-hidden: 0, $opacity-partial: 0.5) {
  @keyframes #{$name} { // Moon fading keyframe: the moon fades out during the day and gradually reappears at night 
    0% {
      opacity: $opacity-full; // Defines the moon's opacity at night (fully visible)
    }
    25% {
      opacity: $opacity-hidden; // Defines the moon's opacity as it begins to fade out
    }
    50% {
      opacity: $opacity-hidden; // Defines the moon's opacity when it is completely hidden
    }
    75% {
      opacity: $opacity-partial; // Defines the moon's opacity at dusk (partially visible)
    }
    87.5% {
      opacity: $opacity-full; // Defines the moon's opacity as it becomes fully visible again
    }
  }
}

/* =============================
   Moon glow
   Adds glowing effect to moon
   Params: $name, $glow-color, $glow-size, $glow-spread, $no-glow
============================= */
@mixin mixin-moonGlow($name, $glow-color: #f6f1d5, $glow-size: 150px, $glow-spread: 50px, $no-glow: none) {
  @keyframes #{$name} { // Moon glow keyframe: the moon's glowing light fades in and out
    0% {
      box-shadow: 0 0 $glow-size $glow-spread $glow-color; // Defines the moon's glow at its maximum visibility
    }
    25%, 50% {
      box-shadow: $no-glow; // Defines the moon's glow as it fades out
    }
    75%, 100% {
      box-shadow: 0 0 $glow-size $glow-spread $glow-color; // Defines the moon's glow as it reappears
    }
  }
}

/* =============================
   Cloud drift
   Moves clouds horizontally with scaling
   Params: $name, $start-x, $end-x, $start-scale, $end-scale
============================= */
@mixin mixin-cloudDrift($name, $start-x: -100%, $end-x: 500%, $start-scale: 1, $end-scale: 1.5) {
  @keyframes #{$name} { // Cloud drifting keyframe: simulates clouds drifting from left to right across the screen 
        0% {
      transform: translateX($start-x) scale($start-scale); // Defines the cloud's initial position and scale
    }
    100% {
      transform: translateX($end-x) scale($end-scale); // Defines the cloud's final position and scale as it drifts across the screen
    }
  }
}

/* =============================
   Particle visibility
   Shows/hides particles over day/night
   Params: $name, $opacity-full, $opacity-hidden, $opacity-partial
============================= */
@mixin mixin-particleVisibility($name, $opacity-full: 1, $opacity-hidden: 0, $opacity-partial: 0.5) {
  @keyframes #{$name} { // Particle visibility keyframe: particles are visible at night and hidden during the day 
    0%, 75% { 
      opacity: $opacity-partial; // Defines the particle's visibility at dawn (partially visible)
    }
    12.5%, 25%, 50% { 
      opacity: $opacity-hidden; // Defines the particle's visibility during the day (fully hidden) 
    }
    87.5% { 
      opacity: $opacity-full; // Defines the particle's visibility at night (fully visible)
    }
  }
}

/* =============================
   Shooting stars
   Moves stars diagonally
   Params: $name, $angle, $start, $end
============================= */
@mixin mixin-shootingStars($name: shootingStars, $angle: 315deg, $start: 0, $end: -65.1vw) {
  @keyframes #{$name} { // Shooting stars keyframes: simulates shooting stars moving diagonally across the screen
    0% {
      transform: rotate($angle) translateX($start); // Defines the initial position and angle of the shooting star
    }
    100% {
      transform: rotate($angle) translateX($end); // Defines the final position of the shooting star after completing its movement
    }
  }
}

/* =============================
   Comet tail
   Controls visibility of comet tail
   Params: $name, $opacity-full, $opacity-hidden
============================= */
@mixin mixin-cometTail($name, $opacity-full: 1, $opacity-hidden: 0) {
  @keyframes #{$name} { // Comet tail keyframes: controls the visibility of the comet tail effect 
    0%, 12.5% { 
      opacity: $opacity-full; // Defines the comet tail's visibility at the beginning of the animation (fully visible)
    } 
    25%, 50% { 
      opacity: $opacity-hidden; // Defines the comet tail's visibility during the hidden phase
    }  
    62.5%, 100% { 
      opacity: $opacity-full; // Defines the comet tail's visibility as it reappears towards the end of the animation
    } 
  }
}

/* =============================
   Star visibility control (4th star)
   Params: $name, $opacity-partial, $opacity-hidden, $opacity-full
============================= */
@mixin mixin-starVisibilityControl($name, $opacity-partial: 0.25, $opacity-hidden: 0, $opacity-full: 1) {
  @keyframes #{$name} { // Generates keyframes for the specified animation name
    0% { 
      opacity: $opacity-hidden; // Defines the star's visibility at the start of the animation (hidden)
    } 
    62.5%, 75% { 
      opacity: $opacity-partial; // Defines the star's visibility during sunset (partially visible)
    }
    87.5% {
      opacity: $opacity-full; // Defines the star's visibility at night (fully visible)
    } 
    100% { 
      opacity: $opacity-hidden; // Defines the star's visibility at dawn (hidden)
    } 
  }
}

/* =============================
   z-index
   Applies z-index if value is numeric
   Params: $value
============================= */
@mixin z-index($value) {
  @if meta.type-of($value) == "number" { // Checks if the provided value is a number
    & {
      z-index: $value; // Applies the z-index value to the element
    }
  } @else {
    @error "The value of z-index must be a number. You provided: #{$value}.";
  }
}

/* =============================
   Size
   Sets width/height, optional min/max
   Params: $width, $height, $min-width, $max-width
============================= */
@mixin size($width, $height: $width, $min-width: null, $max-width: null) {
  & {
    width: $width; // Set the width of the element
    height: $height; // Set the height of the element; defaults to the width if not explicitly provided
  } 
  @if $min-width != null {
    & {
      min-width: $min-width; // Conditionally set the minimum width if specified
    }
  }
  @if $max-width != null { // Conditionally set the maximum width if specified
    & {
      max-width: $max-width;
    }
  }
}

/* =============================
   Multiple animations
   Applies multiple animations at once
   Params: $animations (list of [name, duration, timing, delay, iteration])
============================= */
@mixin dynamic-animations($animations...) {
  $animation-list: (); // Initialize an empty list to store the animation properties
  @each $animation in $animations { // Iterate over each animation passed as an argument
    $name: list.nth($animation, 1); // Extract animation name
    $duration: list.nth($animation, 2); // Extract duration of the animation
    $timing: list.nth($animation, 3); // Extract timing function (e.g., linear, ease-in)
    $delay: list.nth($animation, 4); // Extract delay before the animation starts
    $iteration: list.nth($animation, 5); // Extract the number of iterations
    // Append the formatted animation properties to the animation list
    $animation-list: list.append($animation-list, #{$name} #{$duration} #{$timing} #{$delay} #{$iteration}, comma); 
  }
  
  animation: $animation-list; // Apply the compiled list of animations to the element
}

/* =============================
   Animation properties
   Sets duration, iteration, delay
   Params: $duration, $iteration, $delay
============================= */
@mixin animation-properties($duration, $iteration: 1, $delay) {
  animation-duration: $duration; // Sets the duration of the animation
  animation-iteration-count: $iteration; // Sets how many times the animation will repeat (defaults to 1)
  animation-delay: $delay; // Sets a delay before the animation starts
}

/* =============================
   Star visibility control (2nd & 3rd stars)
   Params: $name, $opacity-partial, $opacity-hidden, $opacity-full
============================= */
@mixin mixin-starVisibilityControl2($name, $opacity-partial: 0.5, $opacity-hidden: 0, $opacity-full: 1) {
  @keyframes #{$name} { // Generates keyframes for the specified animation name
    0% { 
      opacity: $opacity-full; // Defines the opacity at the start of the animation (fully visible)
    } 
    30% {
      opacity: $opacity-partial; // Defines the opacity at the 30% mark (partially visible)
    }
    60%, 100% { 
      opacity: $opacity-hidden; // Defines the opacity at the 60% and 100% marks (fully hidden)
    } 
  }
}

/* =============================
   Box shadow
   Applies multiple shadows
   Params: $shadows (list of box-shadow values)
============================= */
@mixin box-shadow($shadows...) {
  $box-shadow-list: (); // Initialize an empty list to store box-shadow values
  @each $shadow in $shadows { // Iterate over each shadow passed as an argument
    $box-shadow-list: list.append($box-shadow-list, $shadow, comma); // Append each shadow value to the list
  }
  & {
    box-shadow: $box-shadow-list; // Apply the compiled list of box-shadow values to the element
  }
}

/* =============================
   Full transition
   Sets longhand transition properties
   Params: $property, $duration, $timing, $delay, $behavior
============================= */
@mixin transition-full(
  $property: all,
  $duration: 0s,
  $timing: ease,
  $delay: 0s,
  $behavior: normal
) {
  transition-property: $property;
  transition-duration: $duration;
  transition-timing-function: $timing;
  transition-delay: $delay;
  transition-behavior: $behavior;
}

